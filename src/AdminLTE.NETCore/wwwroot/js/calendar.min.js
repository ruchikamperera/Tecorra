$(function(){function f(n){n.each(function(){var n={title:$.trim($(this).text())};$(this).data("eventObject",n);$(this).draggable({zIndex:1070,revert:!0,revertDuration:0})})}var r,e;f($("#external-events div.external-event"));var u=new Date,i=u.getDate(),n=u.getMonth(),t=u.getFullYear();$("#calendar").fullCalendar({header:{left:"prev,next today",center:"title",right:"month,agendaWeek,agendaDay"},buttonText:{today:"today",month:"month",week:"week",day:"day"},events:[{title:"All Day Event",start:new Date(t,n,1),backgroundColor:"#f56954",borderColor:"#f56954"},{title:"Long Event",start:new Date(t,n,i-5),end:new Date(t,n,i-2),backgroundColor:"#f39c12",borderColor:"#f39c12"},{title:"Meeting",start:new Date(t,n,i,10,30),allDay:!1,backgroundColor:"#0073b7",borderColor:"#0073b7"},{title:"Lunch",start:new Date(t,n,i,12,0),end:new Date(t,n,i,14,0),allDay:!1,backgroundColor:"#00c0ef",borderColor:"#00c0ef"},{title:"Birthday Party",start:new Date(t,n,i+1,19,0),end:new Date(t,n,i+1,22,30),allDay:!1,backgroundColor:"#00a65a",borderColor:"#00a65a"},{title:"Click for Google",start:new Date(t,n,28),end:new Date(t,n,29),url:"http://google.com/",backgroundColor:"#3c8dbc",borderColor:"#3c8dbc"}],editable:!0,droppable:!0,drop:function(n,t){var r=$(this).data("eventObject"),i=$.extend({},r);i.start=n;i.allDay=t;i.backgroundColor=$(this).css("background-color");i.borderColor=$(this).css("border-color");$("#calendar").fullCalendar("renderEvent",i,!0);$("#drop-remove").is(":checked")&&$(this).remove()}});r="#3c8dbc";e=$("#color-chooser-btn");$("#color-chooser > li > a").click(function(n){n.preventDefault();r=$(this).css("color");$("#add-new-event").css({"background-color":r,"border-color":r})});$("#add-new-event").click(function(n){var i,t;(n.preventDefault(),i=$("#new-event").val(),i.length!==0)&&(t=$("<div />"),t.css({"background-color":r,"border-color":r,color:"#fff"}).addClass("external-event"),t.html(i),$("#external-events").prepend(t),f(t),$("#new-event").val(""))})});